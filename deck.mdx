import {
  Head, Image, Notes, Appear,
  Invert, Split, SplitRight, FullScreenCode, Horizontal
} from 'mdx-deck'
import { future, dark, comic, yellow } from '@mdx-deck/themes'
import highlight from '@mdx-deck/themes/syntax-highlighter-prism'
import Highlighter from 'react-syntax-highlighter'
import boog from './images/boogs.png'
export const themes = [ future, highlight ]

# Testing a Legacy
<Appear>
  <h4>Let's Get Salty</h4>
</Appear>

---
# Test Coverage is a lie

---
## :sunglasses: End :sunglasses:

---
<div style="width: 80%; height: 75%;">
  <Image
    src='https://media3.giphy.com/media/qxtxlL4sFFle/giphy-downsized.gif?cid=6104955e7f439c544f5f6941ad369eeeb4b506bc4f183c31&rid=giphy-downsized.gif'
    size='contain'
  />
</div>

## ...What?

---
# Kidding
<Appear>
  <h4>(Mostly)</h4>
</Appear>

---
# Coverage != Quality

---
# Clarify

---
# Coverage is Coverage
Something is better than nothing

---
<div style="width: 60%; height: 55%;">
  <Image
    src="https://media1.giphy.com/media/3oz8xM0mLv9qOooZY4/giphy-downsized.gif?cid=6104955ed5b08024d6df7ca1813322f5afe2d08c2fc33fec&rid=giphy-downsized.gif"
    size='contain'
  />
</div>

## Don't be fooled

---
### 100% coverage doesn't mean

<ul>
  <Appear>
    <li>No Bugs</li>
    <li>No Edgecases</li>
    <li>World Peace</li>
  </Appear>
</ul>

---
It only means you executed 100% of your code

---
# An example

---
# The bug

<div style="width: 80%; height: 25%;">
  <Image src={boog} size="contain" />
</div>

---
# The Fix

<div style="width: 80%; font-size: 35px;">
  <Highlighter language='ruby'>
    { `sheet.add_image(image_src: "#{Rails.root}/app/assets/images/svg/shareworks_logo.svg") do |image|
sheet.add_image(image_src: "#{Rails.root}/app/assets/images/shareworks_logo.png") do |image|` }
  </Highlighter>
</div>

---
## The test

<Highlighter language='ruby'>
{ `test 'excel_endpoint' do
   get :excel_single,
       company_id: @company.id,
       report: 'exit_distributions'
   assert_equal(response.status, 200)
end` }
</Highlighter>

---
## But what if
you have 30+ reports that are untested?

---
<Highlighter language='ruby'>
{ `reports.each do |report|
  test "export excel for #{report}" do
    get :excel_single,
        company_id: @company.id,
        report:     report
   assert_equal(response.status, 200)
  end
end` }
</Highlighter>

---
# That test is a

<Image
  src="https://media.giphy.com/media/3o7TKFvAdiVLqgrWNi/giphy.gif"
  size='contain'
/>

#

---
# But it added [coverage](https://codeclimate.com/repos/5d0d086d5cf1ae0164011ebe/progress/coverage)

<Appear>
  <h4>About 10% total</h4>
</Appear>

---
# Even though they aren't good tests it provided a lot of coverage

---
## What _can_ this show us?

<ul>
  <Appear>
    <li>Domain lines</li>
    <li>Data heavy processes</li>
    <li>Fragile Area of code</li>
  </Appear>
</ul>

---
<div style="width: 80%; height: 75%;">
  <Image
    src="https://media.giphy.com/media/hwTWG731ye8kU/giphy.gif"
    size='contain'
  />
</div>

---
# Questions?

---
<div style="width: 80%; height: 75%;">
  <Image
    src="https://media.giphy.com/media/z7inE8DVgUkwg/giphy.gif"
  />
</div>
